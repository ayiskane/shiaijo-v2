<script lang="ts">
  import { Progress } from '$lib/components/ui/progress';
  import { Skeleton } from '$lib/components/ui/skeleton';

  export let loading = false;
  export let members: any[] = [];
  export let groups: any[] = [];
  export let tournaments: any[] = [];
  export let activeTournament: any = null;
  export let completedMatches: any[] = [];
  export let matches: any[] = [];
  export let participants: any[] = [];
  export let progressPercent = 0;
</script>

{#if loading}
  <div class="space-y-4">
    <Skeleton class="h-8 w-48" />
    <div class="grid gap-4 md:grid-cols-3">
      <Skeleton class="h-24" />
      <Skeleton class="h-24" />
      <Skeleton class="h-24" />
    </div>
  </div>
{:else}
  <h1 class="mb-6 text-2xl font-bold">Dashboard</h1>
  <div class="mb-6 grid gap-4 grid-cols-2 md:grid-cols-3">
    <div class="rounded-xl border border-border bg-card p-4">
      <div class="text-2xl sm:text-3xl font-bold text-primary">{members.length}</div>
      <div class="text-xs sm:text-sm text-muted-foreground">Members</div>
    </div>
    <div class="rounded-xl border border-border bg-card p-4">
      <div class="text-2xl sm:text-3xl font-bold text-blue-400">{groups.length}</div>
      <div class="text-xs sm:text-sm text-muted-foreground">Groups</div>
    </div>
    <div class="rounded-xl border border-border bg-card p-4 col-span-2 md:col-span-1">
      <div class="text-2xl sm:text-3xl font-bold text-green-400">{tournaments.length}</div>
      <div class="text-xs sm:text-sm text-muted-foreground">Tournaments</div>
    </div>
  </div>

  {#if activeTournament}
    <div class="rounded-xl border border-green-500/50 bg-green-900/20 p-4">
      <div class="mb-2 flex items-center gap-2">
        <span class="h-2 w-2 animate-pulse rounded-full bg-green-500"></span>
        <h3 class="font-bold text-green-400 truncate">Live: {activeTournament.name}</h3>
      </div>
      <div class="flex flex-wrap gap-2 sm:gap-4 text-xs sm:text-sm text-muted-foreground">
        <span>üìÖ {activeTournament.date}</span>
        <span>‚öîÔ∏è {completedMatches.length}/{matches.length}</span>
        <span>üë• {participants.length}</span>
      </div>
      <div class="mt-3">
        <Progress value={progressPercent} class="h-2" />
        <p class="mt-1 text-xs text-muted-foreground">{progressPercent}% complete</p>
      </div>
    </div>
  {/if}
{/if}
